# í•œêµ­ ë…¸ë§ˆë“œ ì‹œí‹° - í”„ë¡œì íŠ¸ í˜„í™© ìš”ì•½

## í”„ë¡œì íŠ¸ ê°œìš”

**ëª©í‘œ**: í•œêµ­ì˜ ë…¸ë§ˆë“œ ì¹œí™” ë„ì‹œ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
**ìŠ¤íƒ**: Next.js 15, TypeScript, Tailwind CSS, Supabase (Auth)
**ë°ì´í„°**: í˜„ì¬ ë”ë¯¸ ë°ì´í„° 10ê°œ ë„ì‹œ, Supabase DB ì „í™˜ ì˜ˆì •

---

## ì™„ë£Œëœ ê¸°ëŠ¥ (Step 1-8)

### âœ… Step 1-5: MVP ê¸°ë³¸ ê¸°ëŠ¥
- ë¶ˆí•„ìš”í•œ ì„¹ì…˜ ì œê±° (ë°‹ì—…, ì»¤ë®¤ë‹ˆí‹°, í€´ì¦ˆ ë“±)
- ë„ì‹œ ì°¾ê¸° ë…ë¦½ í˜ì´ì§€ (`/cities`) ìƒì„±
- ì¹´í…Œê³ ë¦¬ í•„í„° (ì „ì²´/ëŒ€ë„ì‹œ/í•´ë³€/ì‚°/ITí—ˆë¸Œ)
- ì •ë ¬ ê¸°ëŠ¥ (ì¸ê¸°ìˆœ/í‰ì ìˆœ/ìƒí™œë¹„ìˆœ)
- ë„ì‹œëª… ê²€ìƒ‰ (í•œê¸€/ì˜ë¬¸ ë¶€ë¶„ ê²€ìƒ‰)
- ë„ì‹œ ìƒì„¸ í˜ì´ì§€ (`/cities/[id]`)

### âœ… Step 6-8: ì¢‹ì•„ìš” ê¸°ëŠ¥ (localStorage ê¸°ë°˜)
- `CityCard` ì¸í„°í˜ì´ìŠ¤ì— `likes` í•„ë“œ ì¶”ê°€
- `useCityLikes` í›… ìƒì„± (localStorage ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬)
- ë„ì‹œ ì¹´ë“œ ë° ìƒì„¸ í˜ì´ì§€ì— í•˜íŠ¸ ì•„ì´ì½˜ UI ì¶”ê°€
- ì¢‹ì•„ìš”ìˆœ ì •ë ¬ ê¸°ëŠ¥ êµ¬í˜„

**ê´€ë ¨ íŒŒì¼**:
- `data/cities.ts`: 10ê°œ ë„ì‹œ ë”ë¯¸ ë°ì´í„° + íƒ€ì… ì •ì˜
- `hooks/useCityLikes.ts`: ì¢‹ì•„ìš” ìƒíƒœ ê´€ë¦¬ (localStorage)
- `components/sections/CityCard.tsx`: ë„ì‹œ ì¹´ë“œ UI
- `components/sections/CityFilterClient.tsx`: í•„í„°/ì •ë ¬/ê²€ìƒ‰
- `app/cities/page.tsx`: ë„ì‹œ ëª©ë¡ í˜ì´ì§€
- `app/cities/[id]/page.tsx`: ë„ì‹œ ìƒì„¸ í˜ì´ì§€

---

## ì§„í–‰ ì˜ˆì • ê¸°ëŠ¥ (Step 9-16)

### ğŸ”„ Step 9-10: Supabase ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸° ì„¤ì •
- `cities` í…Œì´ë¸” ìƒì„± (id, name, category, rating, monthly_cost, pros, cons ë“±)
- `city_likes` í…Œì´ë¸” ìƒì„± (user_id, city_id, ìœ ë‹ˆí¬ ì œì•½)
- RLS ì •ì±… ì„¤ì • (ì½ê¸°: ì „ì²´ í—ˆìš©, ì“°ê¸°: ì¸ì¦ ì‚¬ìš©ìë§Œ)
- ë”ë¯¸ ë°ì´í„° 10ê°œ ì‹œë“œ ì‚½ì…

### ğŸ”„ Step 11-14: DB ì—°ë™
- TypeScript íƒ€ì… ìë™ ìƒì„± (`lib/database.types.ts`)
- ë„ì‹œ ë°ì´í„° fetching ìœ í‹¸ë¦¬í‹° (`lib/queries/cities.ts`)
- ë„ì‹œ ëª©ë¡ í˜ì´ì§€ DB ì—°ë™ (ë”ë¯¸ ë°ì´í„° â†’ Supabase)
- ë„ì‹œ ìƒì„¸ í˜ì´ì§€ DB ì—°ë™

### ğŸ”„ Step 15-16: ì¢‹ì•„ìš” ê¸°ëŠ¥ DB ì „í™˜ ë° ì •ë¦¬
- `useCityLikes` í›… ë¦¬íŒ©í† ë§ (localStorage â†’ Supabase)
- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì ë¡œê·¸ì¸ ìœ ë„ ì²˜ë¦¬
- Optimistic UI ì ìš©
- ë”ë¯¸ ë°ì´í„° ì •ë¦¬ ë° ìµœì¢… ê²€ì¦

---

## í˜„ì¬ Git ìƒíƒœ

**ë¸Œëœì¹˜**: `main`
**ìµœê·¼ ì»¤ë°‹**:
- `aaa4c53` - ì¢‹ì•„ìš”ìˆœ ì •ë ¬ì— ì‹¤ì‹œê°„ likeCounts ì—°ë™
- `35d7481` - ì¢‹ì•„ìš”ìˆœ ì •ë ¬ ê¸°ëŠ¥ êµ¬í˜„
- `b322dc5` - ë„ì‹œ ì¹´ë“œ ë° ìƒì„¸ í˜ì´ì§€ì— ì¢‹ì•„ìš” ë²„íŠ¼ UI ì¶”ê°€

**ë³€ê²½ ì‚¬í•­** (ì»¤ë°‹ ëŒ€ê¸°):
- `SPEC.md`: Step 6-16 ì¶”ê°€
- `.claude/settings.local.json`: ì„¤ì • ë³€ê²½
- `.mcp.json`: Supabase MCP ì„œë²„ ì¶”ê°€ (ì‹ ê·œ)
- `.claude/commands/`: ì‹ ê·œ ë””ë ‰í† ë¦¬

---

## Supabase ì„¤ì •

### í™˜ê²½ ë³€ìˆ˜ (`.env.local`)
```
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url_here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

### MCP ì„¤ì • (`.mcp.json`)
- Supabase MCP ì„œë²„ ì—°ë™ ì™„ë£Œ
- Project ref: `taattftjqyzanyjjkguw`
- Read-only ëª¨ë“œ í™œì„±í™”

---

## ë‹¤ìŒ ì‘ì—… ìš°ì„ ìˆœìœ„

1. **Supabase í…Œì´ë¸” ìƒì„±** (Step 9)
   - `cities` í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì •ì˜ ë° ìƒì„±
   - `city_likes` í…Œì´ë¸” ìƒì„±
   - RLS ì •ì±… ì„¤ì •

2. **ì‹œë“œ ë°ì´í„° ì‚½ì…** (Step 10)
   - `data/cities.ts`ì˜ 10ê°œ ë„ì‹œ ë°ì´í„°ë¥¼ SQL INSERT

3. **TypeScript íƒ€ì… ìƒì„±** (Step 11)
   - Supabase CLIë¡œ íƒ€ì… ìë™ ìƒì„±

4. **ì ì§„ì  DB ì „í™˜** (Step 12-15)
   - í˜ì´ì§€ë³„ë¡œ ìˆœì°¨ì ìœ¼ë¡œ DB ì—°ë™
   - ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€í•˜ë©´ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜

---

## ì£¼ìš” ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
claude-nomade/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ cities/
â”‚   â”‚   â”œâ”€â”€ [id]/page.tsx         # ë„ì‹œ ìƒì„¸ í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ page.tsx               # ë„ì‹œ ëª©ë¡ í˜ì´ì§€
â”‚   â””â”€â”€ page.tsx                   # í™ˆí˜ì´ì§€
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ NavbarClient.tsx      # ë„¤ë¹„ê²Œì´ì…˜ ë°”
â”‚   â”‚   â””â”€â”€ Footer.tsx             # í‘¸í„°
â”‚   â””â”€â”€ sections/
â”‚       â”œâ”€â”€ CityCard.tsx           # ë„ì‹œ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ CityFilterClient.tsx  # í•„í„°/ì •ë ¬/ê²€ìƒ‰
â”‚       â””â”€â”€ PopularCitiesSection.tsx # ì¸ê¸° ë„ì‹œ ì„¹ì…˜
â”œâ”€â”€ data/
â”‚   â””â”€â”€ cities.ts                  # ë”ë¯¸ ë°ì´í„° (DB ì „í™˜ í›„ ì •ë¦¬ ì˜ˆì •)
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useCityLikes.ts           # ì¢‹ì•„ìš” ìƒíƒœ ê´€ë¦¬
â”œâ”€â”€ utils/supabase/
â”‚   â”œâ”€â”€ client.ts                  # í´ë¼ì´ì–¸íŠ¸ Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ server.ts                  # ì„œë²„ Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ middleware.ts              # ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
â”œâ”€â”€ .env.local                     # í™˜ê²½ ë³€ìˆ˜ (Supabase ì„¤ì • í•„ìš”)
â”œâ”€â”€ .mcp.json                      # Supabase MCP ì„œë²„ ì„¤ì •
â””â”€â”€ SPEC.md                        # ì „ì²´ ì‹¤í–‰ ê³„íš (Step 1-16)
```

---

## ì°¸ê³  ë¬¸ì„œ

- **í”„ë¡œì íŠ¸ ì‹¤í–‰ ê³„íš**: `SPEC.md` (Step 1-16 ìƒì„¸ ë‚´ìš©)
- **GitHub Issues**: #5-#7 ì™„ë£Œ, #11-#18 ì§„í–‰ ì˜ˆì •
- **Supabase MCP**: `.mcp.json` ì„¤ì • ì™„ë£Œ
